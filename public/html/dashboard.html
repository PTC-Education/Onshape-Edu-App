<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Onshape 3D Printer Dashboard</title>
  
  <script src="../client/acorn.js" charset="utf-8"></script>
  <script src="../client/interpreter.js" charset="utf-8"></script>
  <script src="../client/msg/js/en.js" charset="utf-8"></script>

  <style id = 'interface' media="screen">
  body {
    padding: 0;
    margin: 0
  }
  #bannerDiv {
    position: fixed;
    width: 100%;
    height: 40px;
    z-index: 10;
    background-color: white;
    left: 0;
    bottom: 0;
    color: #656565;
    text-align: center;
    font-family: "Flama", "Open Sans","Helvetica Neue","Helvetica","Arial","sans-serif";
  }
  </style>

</head>

<body>
<h2>hello world</h2>
Dashboard for visualizing 3D printer info
</body>

<script src="../appStorage.js" charset="utf-8"></script>
<script src="../appFeatureList.js" charset="utf-8"></script>
<script src="../appExportStudio.js" charset="utf-8"></script>
<script src="../appAssembly.js" charset="utf-8"></script>

<script>


// Update the workspace with the last saved workspace
getDashboardAppElementInfo()
  .then((value) => getJSONTree(value.applicationID)
  .then((value) => consol.log(value)));

/*
   Function for storing workspace to appElement
*/
async function updateAppStorage(){
  // Get the info of the app element used for persistent storage
  var appElementInfo = await getAppElementInfo();

  // Get the xml and stringified xml representation of the current Blockly main workspace
  var xml = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace)
  var xml_text = Blockly.Xml.domToText(xml);
  // console.log(xml_text)

  // Update the JSON tree of the app element to persist storage of the last exported Blockly main workspace
  await updateJSONTree(appElementInfo.applicationID, appElementInfo.changeID, xml_text)

  // Change the color of the run button back to white after the tree is updated
  document.getElementById('runButton').style.backgroundColor = "rgba(255, 255, 255, 0.5)"
  document.getElementById('runButton').innerHTML = "Run Blocks"
  document.getElementById('runButton').style.color = "rgb(153, 153, 153)"
}

</script>
</html>
